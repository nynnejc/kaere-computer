(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[591],{3360:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/guestbook",function(){return r(9275)}])},9275:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(4848),a=r(6540);let l="https://82eikoh5ne.execute-api.us-east-1.amazonaws.com/prod/guestbook",o=()=>{let[e,t]=(0,a.useState)([]),[r,o]=(0,a.useState)(""),[i,n]=(0,a.useState)(""),[d,h]=(0,a.useState)(""),[c,u]=(0,a.useState)("#FFB2D9"),[x,j]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch(l);if(!e.ok)throw Error("Failed to fetch guestbook entries.");let r=await e.json();t(r.entries)}catch(e){console.error(e),j("Failed to load guestbook entries.")}})()},[]);let m=async e=>{if(e.preventDefault(),!r||!i||!d){j("All fields are required.");return}try{let e=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,message:i,whereIsHome:d,color:c})});if(!e.ok)throw Error("Failed to save entry.");let s=await e.json();t(e=>[...e,s.entry]),o(""),n(""),h(""),u("#FFB2D9"),j("")}catch(e){console.error(e),j("Failed to save your entry. Please try again.")}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Guestbook"}),x&&(0,s.jsx)("p",{style:{color:"red"},children:x}),(0,s.jsx)("ul",{children:e.map(e=>(0,s.jsxs)("li",{style:{color:e.color||"black"},children:[(0,s.jsx)("strong",{children:e.name}),": ",e.message," ",(0,s.jsx)("br",{}),(0,s.jsx)("small",{children:e.whereIsHome}),(0,s.jsx)("br",{}),(0,s.jsx)("small",{children:new Date(e.timestamp).toLocaleString()})]},e.id))}),(0,s.jsx)("h2",{children:"Add a new entry"}),(0,s.jsxs)("form",{onSubmit:m,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",children:"Name:"}),(0,s.jsx)("input",{type:"text",id:"name",value:r,onChange:e=>o(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"message",children:"Message:"}),(0,s.jsx)("textarea",{id:"message",value:i,onChange:e=>n(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"whereIsHome",children:"Where is home?"}),(0,s.jsx)("input",{type:"text",id:"whereIsHome",value:d,onChange:e=>h(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"color",children:"Pick a color:"}),(0,s.jsx)("input",{type:"color",id:"color",value:c,onChange:e=>{u(e.target.value)}})]}),(0,s.jsx)("button",{type:"submit",children:"Submit"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(3360)),_N_E=e.O()}]);