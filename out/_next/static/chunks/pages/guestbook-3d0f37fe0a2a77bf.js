(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[591],{3360:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/guestbook",function(){return s(9275)}])},9275:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(4848),a=s(6540);let l="https://82eikoh5ne.execute-api.us-east-1.amazonaws.com/prod/guestbook",o=()=>{let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)(""),[n,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[h,u]=(0,a.useState)("#FFB2D9"),[m,x]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch(l);if(!e.ok)throw Error("Failed to fetch guestbook entries.");let s=await e.json();t(s.entries)}catch(e){console.error(e),x("Failed to load guestbook entries.")}})()},[]);let j=async e=>{if(e.preventDefault(),!s||!n||!c){x("All fields are required.");return}try{let e=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,message:n,whereIsHome:c,color:h})});if(!e.ok)throw Error("Failed to save entry.");let r=await e.json();t(e=>[...e,r.entry]),o(""),i(""),d(""),u("#FFFFFF"),x("")}catch(e){console.error(e),x("Failed to save your entry. Please try again.")}};return(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row min-h-screen selection:bg-pink-300",children:[(0,r.jsx)("h1",{className:"mb-8 mt-4",children:"Guestbook"}),m&&(0,r.jsx)("p",{style:{color:"red"},children:m}),(0,r.jsx)("ul",{children:e.map(e=>(0,r.jsxs)("li",{style:{color:e.color||"black"},children:[(0,r.jsx)("strong",{children:e.name}),": ",e.message," ",(0,r.jsx)("br",{}),(0,r.jsx)("small",{children:e.whereIsHome}),(0,r.jsx)("br",{}),(0,r.jsx)("small",{children:new Date(e.timestamp).toLocaleString()})]},e.id))}),(0,r.jsx)("h2",{children:"Add a new entry"}),(0,r.jsxs)("form",{onSubmit:j,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",children:"Name:"}),(0,r.jsx)("input",{type:"text",id:"name",value:s,onChange:e=>o(e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"message",children:"Message:"}),(0,r.jsx)("textarea",{id:"message",value:n,onChange:e=>i(e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"whereIsHome",children:"Where is home?"}),(0,r.jsx)("input",{type:"text",id:"whereIsHome",value:c,onChange:e=>d(e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"color",children:"Pick a color:"}),(0,r.jsx)("input",{type:"color",id:"color",value:h,onChange:e=>{u(e.target.value)}})]}),(0,r.jsx)("button",{type:"submit",children:"Submit"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(3360)),_N_E=e.O()}]);